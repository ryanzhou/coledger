<div class="modal-header">
  <button type="button" ng-click="cancel()" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <h3 class="modal-title">
    <span editable-text="transaction.name" onaftersave="updateTransaction()" e-form="transactionNameForm">{{ transaction.name }}</span>
    <button class="btn btn-xs btn-default" ng-click="transactionNameForm.$show()" ng-hide="transactionNameForm.$visible">
      <i class="fa fa-pencil"></i>
    </button>
  </h3>
  <p>
    <span editable-textarea="transaction.description" e-rows="3" e-cols="80" onaftersave="updateTransaction()" >
      {{ transaction.description || 'Edit description...' }}
    </span>
  </p>
</div>
<div class="modal-body">
  <div class="row transaction-detail">
    <div class="col-sm-4">
      <h6>Amount</h6>
      <div class="detail-value">
        <span editable-text="transaction.amount.decimal" onaftersave="updateTransaction()">{{ transaction.amount.formatted || "Add an amount..." }}</span>
      </div>
    </div>
    <div class="col-sm-4">
      <h6>Due date</h6>
      <div class="detail-value">
        <input type="text" class="form-control pickadate" pick-a-date="transaction.parsed_due_date" placeholder="Add a due date...">
      </div>
    </div>
    <div class="col-sm-4">
      <h6>Assignee</h6>
      <div class="detail-value">
        <span editable-select="transaction.assignee_username" e-form="assigneeForm" e-ng-options="m.user.username as m.user.first_name + ' ' + m.user.last_name for m in memberships" onaftersave="updateTransaction()">
          <div ng-show="transaction.assignee"><img class="img-rounded" src="https://www.gravatar.com/avatar/{{ transaction.assignee.email_digest }}?s=24&d=retro"></img> {{ transaction.assignee.first_name }} {{ transaction.assignee.last_name }}</div>
        </span>
        <div ng-hide="transaction.assignee || assigneeForm.$visible">
          <a href ng-click="assigneeForm.$show()" class="btn btn-xs btn-primary">Assign to someone...</a>
        </div>
        <div ng-show="transaction.assignee && !assigneeForm.$visible">
          <a href ng-click="assigneeForm.$show()" class="btn btn-xs btn-primary">Edit assignee</a> <a href ng-click="removeAssignment()" class="btn btn-xs btn-danger">Remove</a>
        </div>
      </div>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-sm-8">
      <transactions-comments></transactions-comments>
    </div>
    <div class="col-sm-4">
      <h4>Attachments</h4>
    </div>
  </div>
  <h4>Delete transaction</h4>
  <div>No longer want this transaction? <a href ng-click="deleteTransaction()" class="danger">Delete this transaction</a></div>
</div>
<div class="modal-footer">
</div>
